/*
 * String method to remove stop words
 * Written by GeekLad http://geeklad.com
 * Stop words obtained from http://www.lextek.com/manuals/onix/stopwords1.html
 *   Usage: string_variable.removeStopWords();
 *   Output: The original String with stop words removed
 */
String.prototype.removeStopWords = function() {
    var x;
    var y;
    var word;
    var words;
    var stop_word;
    var regex_str;
    var regex;
    var org_string = this.valueOf();
    var stop_words = [
"a",
﻿"aber",
"about",
"above",
"after",
"again",
"against",
﻿"algún",
"alguna",
"algunas",
"alguno",
"algunos",
"all",
﻿"alors",
"als",
"am",
"ambos",
"an",
"and",
"ante",
"antes",
"any",
"aquel",
"aquellas",
"aquellos",
"aqui",
"are",
"aren't",
"arriba",
"as",
"at",
"atras",
"au",
"auch",
"aucuns",
"auf",
"aus",
"aussi",
"autre",
"avant",
"avec",
"avoir",
"bajo",
"bastante",
"be",
"because",
"been",
"before",
"bei",
"being",
"below",
"between",
"bien",
"bin",
"bis",
"bist",
"both",
"but",
"by",
"ça",
"cada",
"cannot",
"can't",
"car",
"ce",
"cela",
"ces",
"ceux",
"chaque",
"ci",
"cierta",
"ciertas",
"cierto",
"ciertos",
"comme",
"comment",
"como",
"con",
"conseguimos",
"conseguir",
"consigo",
"consigue",
"consiguen",
"consigues",
"could",
"couldn't",
"cual",
"cuando",
"da",
"dadurch",
"daher",
"dans",
"darum",
"das",
"dass",
"daß",
"début",
"dedans",
"dehors",
"dein",
"deine",
"dem",
"den",
"dentro",
"depuis",
"der",
"des",
"desde",
"deshalb",
"dessen",
"deux",
"devrait",
"did",
"didn't",
"die",
"dies",
"dieser",
"dieses",
"do",
"doch",
"does",
"doesn't",
"doing",
"doit",
"donc",
"donde",
"don't",
"dort",
"dos",
"down",
"droite",
"du",
"durch",
"during",
"each",
"ein",
"eine",
"einem",
"einen",
"einer",
"eines",
"el",
"ellas",
"elle",
"elles",
"ellos",
"en",
"encima",
"encore",
"entonces",
"entre",
"er",
"era",
"eramos",
"eran",
"eras",
"eres",
"es",
"essai",
"est",
"esta",
"estaba",
"estado",
"estais",
"estamos",
"estan",
"estoy",
"et",
"étaient",
"état",
"été",
"étions",
"être",
"eu",
"euer",
"eure",
"fait",
"faites",
"few",
"fois",
"font",
"for",
"from",
"fue",
"fueron",
"fui",
"fuimos",
"für",
"further",
"ha",
"hace",
"haceis",
"hacemos",
"hacen",
"hacer",
"haces",
"had",
"hadn't",
"hago",
"has",
"hasn't",
"hatte",
"hatten",
"hattest",
"hattet",
"haut",
"have",
"haven't",
"having",
"he",
"he'd",
"he'll",
"her",
"here",
"here's",
"hers",
"herself",
"he's",
"hier",
"him",
"himself",
"hinter",
"his",
"hors",
"how",
"how's",
"i",
"ich",
"ici",
"i'd",
"if",
"ihr",
"ihre",
"il",
"i'll",
"ils",
"i'm",
"im",
"in",
"incluso",
"intenta",
"intentais",
"intentamos",
"intentan",
"intentar",
"intentas",
"intento",
"into",
"ir",
"is",
"isn't",
"ist",
"it",
"it's",
"its",
"itself",
"i've",
"ja",
"je",
"jede",
"jedem",
"jeden",
"jeder",
"jedes",
"jener",
"jenes",
"jetzt",
"juste",
"kann",
"kannst",
"können",
"könnt",
"la",
"là",
"las",
"le",
"les",
"let's",
"leur",
"lo",
"los",
"ma",
"machen",
"maintenant",
"mais",
"me",
"mein",
"meine",
"même",
"mientras",
"mine",
"mio",
"mit",
"modo",
"moins",
"mon",
"more",
"most",
"mot",
"muchos",
"muß",
"müssen",
"musst",
"mußt",
"müßt",
"mustn't",
"muy",
"my",
"myself",
"nach",
"nachdem",
"nein",
"ni",
"nicht",
"no",
"nommés",
"nor",
"nos",
"nosotros",
"not",
"notre",
"nous",
"nouveaux",
"nun",
"oder",
"of",
"off",
"on",
"once",
"only",
"or",
"other",
"otro",
"ou",
"où",
"ought",
"our",
"ourselves",
"out",
"over",
"own",
"par",
"para",
"parce",
"parole",
"pas",
"pero",
"personnes",
"peu",
"peut",
"pièce",
"plupart",
"podeis",
"poder",
"podria",
"podriais",
"podriamos",
"podrian",
"podrias",
"por",
"porque",
"pour",
"pourquoi",
"pueden",
"puedo",
"quand",
"que",
"quel",
"quelle",
"quelles",
"quels",
"qui",
"quien",
"sa",
"sabe",
"sabeis",
"sabemos",
"saben",
"saber",
"sabes",
"same",
"sans",
"seid",
"sein",
"seine",
"ser",
"ses",
"seulement",
"shan't",
"she",
"she'd",
"she'll",
"she's",
"should",
"shouldn't",
"si",
"sich",
"sie",
"sien",
"siendo",
"sin",
"sind",
"so",
"sobre",
"sois",
"solamente",
"soll",
"sollen",
"sollst",
"sollt",
"solo",
"some",
"somos",
"son",
"sonst",
"sont",
"sous",
"soweit",
"sowie",
"soy",
"soyez",
"su",
"such",
"sujet",
"sur",
"sus",
"ta",
"también",
"tandis",
"tellement",
"tels",
"teneis",
"tenemos",
"tener",
"tengo",
"tes",
"than",
"that",
"that's",
"the",
"their",
"theirs",
"them",
"themselves",
"then",
"there",
"there's",
"these",
"they",
"they'd",
"they'll",
"they're",
"they've",
"this",
"those",
"through",
"tiene",
"tienen",
"to",
"todo",
"ton",
"too",
"tous",
"tout",
"trabaja",
"trabajais",
"trabajamos",
"trabajan",
"trabajar",
"trabajas",
"trabajo",
"tras",
"très",
"trop",
"tu",
"tuyo",
"über",
"ultimo",
"un",
"una",
"unas",
"und",
"under",
"uno",
"unos",
"unser",
"unsere",
"unter",
"until",
"up",
"usais",
"usamos",
"usan",
"usar",
"usas",
"va",
"vais",
"valeur",
"vamos",
"van",
"vaya",
"very",
"voie",
"voient",
"vom",
"von",
"vont",
"vor",
"vosotras",
"vosotros",
"votre",
"vous",
"voy",
"vu",
"wann",
"warum",
"was",
"wasn't",
"we",
"we'd",
"weiter",
"weitere",
"we'll",
"wenn",
"wer",
"werde",
"werden",
"werdet",
"we're",
"were",
"weren't",
"weshalb",
"we've",
"what",
"what's",
"when",
"when's",
"where",
"where's",
"which",
"while",
"who",
"whom",
"who's",
"why",
"why's",
"wie",
"wieder",
"wieso",
"wir",
"wird",
"wirst",
"with",
"wo",
"woher",
"wohin",
"won't",
"would",
"wouldn't",
"yo",
"you",
"you'd",
"you'll",
"your",
"you're",
"yours",
"yourself",
"yourselves",
"you've",
"zu",
"zum",
"zur"
    ];


    var mapstopwords = new Object()
    for(i=0; i < stop_words.length; i++) {
        stop_word = stop_words[i];
        mapstopwords[stop_word] = 1;
    }
         
    // Split out all the individual words in the phrase
    words = org_string.match(/[^\s]+|\s+[^\s+]$/g);
    cleansed_words = [];

    // Review all the words
    for(x=0; words && x < words.length; x++) {
        word = words[x].replace(/\s+|[^a-z]+/ig, "");   // Trim the word and remove non-alpha
        lw = word.toLowerCase();
        if (lw in mapstopwords) {
          continue;
        }
        cleansed_words.push(lw);      
    }
    return cleansed_words.join(" ");
};